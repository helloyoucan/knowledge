#### 组件Widget

- 无状态组件

  可以理解为将外部传入的数据转化为界面展示的内容，只会渲染一次。

- 有状态组件

  是定义交互逻辑和业务数据，可以理解为具有动态可交互的内容界面，会根据数据的变化进行多次渲染。

#### 生命周期

Flutter 中说的生命周期，也是指**有状态组件**，对于**无状态组件生命周期只有 build 这个过程**，也只会渲染一次，而有状态组件则比较复杂

- **`createState`**  

  `StatefulWidget`中创建State的方法，当`StatefulWidget`被调用时会立即执行。

- **`initState`**

  State初始化时调用，可以在此期间执行State各变量的初始化赋值，也可以与服务端交换，获取服务端数据后调用`setState`来设置State

- **`didChangeDependencies`**

  组件依赖的全局State发生变化时调用。（类似`Redux`的State）

- **`build`**

  返回需要渲染的Widget，会被调用多次，所以在函数内只能做返回Widget的相关逻辑，避免执行多次导致状态异常。（类似react的render）

- **`reassemble`**

  开发阶段使用，在debug模式下，热重载时调用，debug时可以在这真debug代码检查代码问题

- **`didUpdateWidget`**

  在主机重新构建（例如热重载），父组件发生build时，子组件的方法才会被调用，该方法调用后会再调用本主机中的build方法

- **`deactivate`**

  组件被移除节点后被调用，如果移除后未被插入到其它节点，会继续调用disspose永久移除。

- **`dispose`**

  永久移除组件，并释放组件资源。

![](http://qeafqm9zu.bkt.clouddn.com/imgs/Flutter%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png)

整个过程分为四个阶段：

1. 初始化阶段，包括两个生命周期函数 createState 和 initState；
2. 组件创建阶段，也可以称组件出生阶段，包括 didChangeDependencies 和 build；
3. 触发组件多次 build ，这个阶段有可能是因为 didChangeDependencies、setState 或者 didUpdateWidget 而引发的组件重新 build ，在组件运行过程中会多次被触发，这也是优化过程中需要着重需要注意的点；
4. 最后是组件销毁阶段，deactivate 和 dispose。

注意：

> 在开发模式，build会调用两次，正式环境不会出现，可通过修改constants.dart解决。



###### 触发组件再次build

- setState
- didChangeDependencies
- didUpdateWidget 
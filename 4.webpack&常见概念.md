



### webpack

##### 1、优化

###### 打包体积优化

1. 提取第三方库或通过引用外部文件的方式引入第三方库
2. 使用压缩插件`ParallelUglifyPlugin`
3. 按需加载资源文件`require.ensure()`和`import()`
4. 单独打包`css`文件（`ExtractTextPlugin`）
5. 去除不必要的插件，开发环境和生产环境单独使用配置文件
6. 优化`devtool`中的`source-map`
7. 服务器启用`gzip`压缩

###### 打包效率

1. 开发环境使用增量构建（`CommonsChunkPlugin`+`chunkhash`+`manifest`+`webpack-md5-hash`），启用热更新
2. 开发环境不做无意义的工作如提取`css`计算文件hash等
3. 选择合适的loader
4. 个别loader开启cache 如babel-loader
5. 第三方库采用引入方式替代
6. 提取公共代码
7. 优化构建时的搜索路径，指明需要构建目录及不需要构建的目录
8. 模块化引入需要的部分
9. 使用支持多线程构建的loader或插件，并行编译



##### 5、Loader

loader就是一个node模块，它输出了一个函数。当某种资源需要用这个loader转换时，这个函数会被调用。并且，这个函数可以通过提供给它的**this**上下文访问Loader API。

编写一个loader

```javascript
// 定以
module.exports = function(src) {
  //src是原文件内容（abcde），下面对内容进行处理，这里是反转
  var result = src.split('').reverse().join(''); 
  //返回JavaScript源码，必须是String或者Buffer
  return `module.exports = '${result}'`;
}
// 使用
{
	test: /\.txt$/,
	use: [
		{
			'./path/reverse-txt-loader'
		}
	]
}
```